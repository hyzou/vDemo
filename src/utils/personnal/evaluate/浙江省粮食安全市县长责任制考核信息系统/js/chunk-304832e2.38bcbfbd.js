(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-304832e2"],{2999:function(e){e.exports=[{type:"inputHidden",label:"数据id",name:"assessmentId",span:24,width:"150px"},{type:"input",label:"年度",name:"year",span:12,width:"150px",disabled:!0},{type:"input",label:"城市",name:"cityName",span:12,width:"150px",disabled:!0},{type:"input",label:"考核内容",name:"assessmentContent",span:24,width:"150px",disabled:!0},{type:"input",label:"重点考核事项",name:"assessmentItems",span:24,width:"150px",disabled:!0},{type:"input",label:"考核目标",name:"assessmentTarget",span:24,width:"150px",disabled:!0},{type:"input",label:"年度考核目标任务",name:"assessmentTargetTask",span:24,width:"150px",disabled:!0},{type:"textarea",label:"评分标准",name:"scoreStandard",span:24,width:"150px",disabled:!0,rows:4},{type:"select",label:"责任处室",name:"officeLeadDepartmentId",span:12,multiple:!1,placeHolder:"请选择",filterable:!1,width:"150px",data:[{label:"杭州市商务局储备监管处",value:"1003002"}]},{type:"select",label:"配合处室",name:"officeCoordinationDepartmentId",span:12,multiple:!1,placeHolder:"请选择",filterable:!1,width:"150px",data:[{label:"杭州市农业农村局农田建设管理处",value:"1002001"}]}]},"2f50":function(e){e.exports=[{flag:"search",size:"",icon:"",label:"立即查找",styleType:"primary",postUrl:"addRegisterMember"},{flag:"reset",size:"",icon:"",label:"清  除",styleType:"",postUrl:"addRegisterMember"}]},"424a":function(e){e.exports=[{type:"inputHidden",label:"数据id",name:"assessmentId",span:12,width:"150px",disabled:!0},{type:"input",label:"年度",name:"year",span:12,width:"150px",disabled:!0},{type:"input",label:"城市",name:"cityName",span:12,width:"150px",disabled:!0},{type:"input",label:"考核内容",name:"assessmentContent",span:24,width:"150px",disabled:!0},{type:"input",label:"重点考核事项",name:"assessmentItems",span:24,width:"150px",disabled:!0},{type:"input",label:"考核目标",name:"assessmentTarget",span:24,width:"150px",disabled:!0},{type:"input",label:"年度考核目标任务",name:"assessmentTargetTask",span:24,width:"150px",disabled:!0},{type:"textarea",label:"评分标准",name:"scoreStandard",span:24,width:"150px",disabled:!0,rows:4},{type:"textarea",label:"局配合意见",name:"opinion",span:24,width:"150px",rows:3},{type:"upload",label:"配合材料",name:"material",span:12,width:"150px",choseBtn:"上传文件"},{type:"inputTable",label:"处室意见",name:"coordinationList",span:24,width:"150px",headers:[{key:"office",title:"相关处室"},{key:"officeOpinions",title:"配合部门意见"},{key:"officeMaterials",title:"配合材料"},{key:"officeInputName",title:"意见填报人"},{key:"officeCheckName",title:"意见审核人"}],tableItems:{office:"",officeOpinions:"",officeMaterials:"",officeInputName:"",officeCheckName:""}},{type:"elTreeSelect",label:"配合单位",name:"coordinationName",span:12,width:"150px",disabled:!0,props:{value:"orgId",label:"orgName",children:"children",choseOnlyLeaf:!1},data:[]},{type:"input",label:"意见填报人",name:"inputName",span:12,width:"150px"},{type:"input",label:"审核人",name:"checkName",span:12,width:"150px"}]},"5c25":function(e){e.exports=[{type:"select",label:"考核内容",name:"assessmentContent",span:8,width:"150px",data:[{label:"目标1",value:"targetId1"},{label:"目标2",value:"targetId2"},{label:"目标3",value:"targetId3"}]},{type:"select",label:"重点考核事项",name:"assessmentItems",span:8,width:"150px",data:[{label:"目标1",value:"targetId1"},{label:"目标2",value:"targetId2"},{label:"目标3",value:"targetId3"}]},{type:"select",label:"考核指标",name:"assessmentTarget",span:8,width:"150px",data:[{label:"目标1",value:"targetId1"},{label:"目标2",value:"targetId2"},{label:"目标3",value:"targetId3"}]},{type:"select",label:"年度考核目标任务",name:"assessmentTargetTask",span:8,width:"150px",data:[{label:"目标1",value:"targetId1"},{label:"目标2",value:"targetId2"},{label:"目标3",value:"targetId3"}]},{type:"select",label:"完成状态",name:"status",span:8,width:"150px",data:[{label:"已完成",value:"complete"},{label:"未完成",value:"incomplete"},{label:"已上报",value:"reported"}]},{type:"select",label:"是否失分",name:"reduceScore",span:8,width:"150px",data:[{label:"是",value:"Y"},{label:"否",value:"N"}]}]},"69e8":function(e){e.exports=[{flag:"cancle",label:"取消",styleType:""},{flag:"save",label:"保存",styleType:"primary"}]},"70e3":function(e,t,a){"use strict";t.a={officeLeadDepartmentId:[{required:!0,message:"责任处室不能为空",trigger:"blur"}],officeCoordinationDepartmentId:[{required:!0,message:"配合处室不能为空",trigger:"blur"}]}},a6f0:function(e,t,a){"use strict";a.r(t);a("ac6a"),a("7f7f");var s=a("5c25"),i=a("2f50"),n=a("2999"),o=a("69e8"),l=a("424a"),r=a("eb02"),p=a("cbc9"),d={opinion:[{required:!0,message:"局配合意见不能为空",trigger:"blur"}],inputName:[{required:!0,message:"意见填报人不能为空",trigger:"blur"}],checkName:[{required:!0,message:"审核人不能为空",trigger:"blur"}],coordinationName:[{required:!0,message:"配合单位不能为空",trigger:"blur"}]},m=a("70e3"),u=a("e776"),c=a("452f"),g={name:"index",components:{formGroup:u.a,Status:c.a},data:function(){return{suggestSetFormItems:{fullScreen:!1,formGroupList:s,formGroupValues:{},formButtonList:i},tableSettings:{tableDatas:[],tableSettingOptions:{ref:"target",tooltipEffect:"dark",rowKey:"assessmentId",border:!0,headerOptions:p,isShowIndex:!0,showIndexHeader:"序号"}},paginationSettings:{currentPage:1,layout:"total, prev, pager, next, jumper",totalNumbers:0},dialogFormSettingsDistribute:{dialogFormVisible:!1,dialogFormTitle:"分配",dialogType:"form",dialogFormItems:{formGroupList:n,formGroupValues:{},formButtonList:o,rules:m.a}},dialogFormSettingsOpinion:{dialogFormVisible:!1,dialogFormTitle:"市级分配",dialogType:"form",dialogFormItems:{formGroupList:l,formGroupValues:{},formButtonList:r,rules:d}}}},methods:{handleSearchFormBtn:function(e,t){console.log(e,t)},handleTableRowButton:function(e,t){var a=this;if("distribute"===t.type)this.dialogFormSettingsDistribute.dialogFormVisible=!0,this.dialogFormSettingsDistribute.dialogFormItems.formGroupList.map(function(e){return"officeLeadDepartmentId"===e.name&&(e.hideItem=!0,e.data=[]),"officeCoordinationDepartmentId"===e.name&&(e.hideItem=!1),e}),this.dialogFormSettingsDistribute.dialogFormItems.formGroupValues=e;else if("opinion"===t.type){var s=this.$store.getters["assessment/getAssessmentResult"];if(this.dialogFormSettingsOpinion.dialogFormVisible=!0,e.officeCoordinationDepartmentId){var i=s[e.assessmentId];i&&i.officeOpinion&&i.officeOpinion.officeOpinions&&(e.coordinationList=[],e.coordinationList.push({office:e.officeCoordinationDepartment,officeOpinions:i.officeOpinion.officeOpinions,officeMaterials:i.officeOpinion.officeMaterials,officeInputName:i.officeOpinion.officeInputName,officeCheckName:i.officeOpinion.officeCheckName}))}this.dialogFormSettingsOpinion.dialogFormItems.formGroupList.map(function(e){return"coordinationName"===e.name&&(e.data=a.$store.getters["user/orgTree"]),e}),e.coordinationName=this.$store.getters["user/userInfos"].userId,this.dialogFormSettingsOpinion.dialogFormItems.formGroupValues=e}},handleDialogFormDistribute:function(e,t){var a=this;this.dialogFormSettingsDistribute.dialogFormVisible=!1,"save"===e.flag&&this.tableSettings.tableDatas.map(function(e){if(e.assessmentId===t.assessmentId){var s=a.$store.getters["user/userIdForName"];e.officeCoordinationDepartment=s[t.officeCoordinationDepartmentId],e=Object.assign({},e,t),a.$store.dispatch("assessment/commitAssessmentInfo",e).then(function(){a.setTableList()})}return e})},handleDialogFormOpinion:function(e,t){var a=this,s=this;this.dialogFormSettingsOpinion.dialogFormVisible=!1,t.assessmentId&&this.$confirm("确认提交给牵头部门处理？","提交",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(e){console.log(e),s.$store.dispatch("assessment/commitAssessmentResult",{formData:t,action:"cityOpinion"}),s.$message({message:"数据提交成功",type:"success"}),a.setTableList()}).catch()},handlePaginationPagenumber:function(){},handleSizeChange:function(){},setTableList:function(){var e=this,t=this.$store.getters["user/userInfos"].userId,a=JSON.parse(JSON.stringify(this.$store.getters["assessment/getAssessmentList"])),s=this.$store.getters["assessment/getAssessmentResult"];this.tableSettings.tableDatas=[],a.forEach(function(a){a.operateBtns=[],a.cityCoordinationDepartmentId&&a.cityCoordinationDepartmentId==t&&(s[a.assessmentId]&&s[a.assessmentId].cityOpinion&&s[a.assessmentId].cityOpinion.opinion?a.status="complete":a.selfScore&&!s[a.assessmentId]?a.status="complete":(a.operateBtns.push({styleType:"primary",type:"opinion",text:"意见"}),a.officeCoordinationDepartmentId||a.operateBtns.push({styleType:"primary",type:"distribute",text:"分配"}),a.status="incomplete"),a.opinion=s[a.assessmentId]&&s[a.assessmentId].cityOpinion&&s[a.assessmentId].cityOpinion.opinion?s[a.assessmentId].cityOpinion.opinion:"",e.tableSettings.tableDatas.push(a))}),this.paginationSettings.totalNumbers=this.tableSettings.tableDatas.length}},mounted:function(){this.setTableList();var e=this.$store.getters["assessment/getAssessmentList"],t=this.suggestSetFormItems.formGroupList;this.suggestSetFormItems.formGroupList=this.$globalFnc.setFilterFormData(e,JSON.parse(JSON.stringify(t)))}},f=a("2877"),b=Object(f.a)(g,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pt10 pr10 pl10 width100"},[a("el-col",{staticClass:"mb20",attrs:{span:24}},[a("commonTitleWithBorder",{attrs:{title:"查询条件"}})],1),a("el-col",{staticClass:"mb20",attrs:{span:24}},[a("formGroup",{attrs:{formGroupSettings:e.suggestSetFormItems},on:{formGroupSubmit:e.handleSearchFormBtn}})],1),a("el-row",{staticClass:"mb10"},[a("el-col",{attrs:{span:6}},[a("commonTitleWithBorder",{attrs:{title:"列表信息"}})],1)],1),a("el-col",{staticClass:"lheight40",attrs:{span:16}},[e._v("\n    状态提醒："),a("Status",{attrs:{status:"incomplete"}}),e._v("未完成\n    "),a("Status",{staticClass:"ml10",attrs:{status:"complete"}}),e._v("已完成\n  ")],1),a("tableList",{attrs:{tablelistSettings:e.tableSettings},on:{handleTableRowButton:e.handleTableRowButton}}),a("pagination",{attrs:{paginationSettings:e.paginationSettings},on:{handlePaginationPagenumber:e.handlePaginationPagenumber,handlePaginationPagesize:e.handleSizeChange}}),e.dialogFormSettingsDistribute.dialogFormVisible?a("dialogForm",{attrs:{dialogFormSettings:e.dialogFormSettingsDistribute},on:{handleDialogForm:e.handleDialogFormDistribute}}):e._e(),e.dialogFormSettingsOpinion.dialogFormVisible?a("dialogForm",{attrs:{dialogFormSettings:e.dialogFormSettingsOpinion},on:{handleDialogForm:e.handleDialogFormOpinion}}):e._e()],1)},[],!1,null,"d5432938",null);t.default=b.exports},cbc9:function(e){e.exports=[{prop:"status",propType:"statusDot",lable:"状态",width:"50px"},{prop:"assessmentTarget",lable:"年度考核目标任务"},{prop:"scoreStandard",lable:"评分标准"},{prop:"targetScore",lable:"分值",width:"70px"},{prop:"opinion",lable:"局配合意见"},{prop:"cityLeadDepartment",lable:"市牵头部门"},{prop:"cityCoordinationDepartment",lable:"市配合部门"},{prop:"officeCoordinationDepartment",lable:"配合处室"},{prop:"operateBtns",lable:"操作",propType:"operateBtns",width:"150px"}]},eb02:function(e){e.exports=[{flag:"cancle",label:"取消",styleType:""},{flag:"save",label:"保存",styleType:"primary"}]}}]);